import{a as fe,u as ve,K as b,e as r,S as me,o as u,j as f,i as s,w as o,l as t,L as p,T as pe,h as i,M as S,N as R,U as ge,g as T,V as W,p as j,O as he,W as _e,X as be,Y as ye,m as v,Z as ke,F as y,k,_ as xe,t as m,$ as Ae,a0 as X,Q as _}from"./vendor.b382efbc.js";/* empty css                 *//* empty css                        *//* empty css               *//* empty css                    */import{_ as we,u as Ce,a as O}from"./index.d13b0e3a.js";const M=N=>(be("data-v-30bcd6a8"),N=N(),ye(),N),Ve={class:"page-equip-list"},Le={class:"flex between",style:{"margin-bottom":"8px"}},Se={class:"flex"},Te=M(()=>i("div",null,"\u4E3B\u5C5E\u6027\uFF1A",-1)),qe=v("\u5168\u90E8\xA0\xA0"),Pe=v("\xA0 "),ze=v("?"),Ue={class:"flex",style:{"margin-bottom":"8px"}},Ee={class:"flex"},Ie=M(()=>i("div",null,"\u7B49\u7EA7\uFF1A",-1)),je=v("\u5168\u90E8\xA0\xA0"),Oe=v("\xA0 "),Me={class:"flex",style:{"margin-bottom":"8px"}},Ne={class:"flex"},De=M(()=>i("div",null,"\u4F4D\u7F6E\uFF1A",-1)),Ye=v("\u5168\u90E8\xA0\xA0"),Be=v("\xA0 "),Fe={class:"flex",style:{"margin-left":"60px"}},Re=M(()=>i("div",null,"\u79CD\u7C7B\uFF1A",-1)),Ge={class:"flex",style:{"margin-left":"40px"}},He=M(()=>i("div",null,"\u526F\u5C5E\u6027\uFF1A",-1)),Ke={class:"flex attr-name"},Qe={class:"main"},We={key:0,class:"fixed-name"},Xe={class:"flex"},Ze={key:0,class:"attr-value main"},Je={key:1,class:"attr-value random"},$e={key:2,class:"attr-value fixed-value"},et={class:"born-time"},tt={class:"flex center pagination-wrap"},lt=fe({name:"equipList"});function at(N){const{formatTime:Z}=Ce(),x=ve(),J=b(()=>x.getters.equipMap),$=b(()=>x.getters.effectiveAttrList),G=b(()=>x.state.equipList),ee=b(()=>x.getters.allAttrMap),H=function(a){return ee.value[a]},K=function(a){return O.transNumberToChinese(a)},te=r([{key:"1",name:"4\u817F"},{key:"2",name:"\u7638\u817F"}]),le=function(){ke(()=>{g()})},q=b(()=>x.getters.allAttrList);let A=r(q.value.map(a=>a.key)),Y=r(!1);const ae=function(a){A.value=a?q.value.map(l=>l.key):[],Y.value=!1,d.value=1,g()};let P=r(!0);const ne=function(a){P.value=q.value.length===a.length,Y.value=a.length>0&&a.length<q.value.length,d.value=1,g()};let w=r([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),B=r(!1);const se=function(a){w.value=a?[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]:[],B.value=!1,d.value=1,g()};let z=r(!0);const oe=function(a){z.value=a.length===16,B.value=a.length>0&&a.length<16,d.value=1,g()};let U=r(!0),F=r(!1);const D=r([0,1,2,3,4,5]),ie=function(a){D.value=a?[0,1,2,3,4,5]:[],F.value=!1,d.value=1,g()},ue=function(a){U.value=a.length===6,F.value=a.length>0&&a.length<6,d.value=1,g()},re=function({prop:a,order:l}){let e=(n,I)=>I.born-n.born;l==="descending"?e=(n,I)=>O.getAttrSum(I,a)-O.getAttrSum(n,a):l==="ascending"&&(e=(n,I)=>O.getAttrSum(n,a)-O.getAttrSum(I,a)),h.value=h.value.sort(e).map(n=>n)};let d=r(1),c=r(10),h=r([]);const de=b(()=>h.value.length<c.value?h.value:h.value.slice((d.value-1)*c.value,h.value.length>d.value*c.value?d.value*c.value:h.value.length)),ce=function(){const a=localStorage.getItem("equipListPageSize");a?c.value=parseInt(a):localStorage.setItem("equipListPageSize",c.value)};me(c,()=>{d.value=1,localStorage.setItem("equipListPageSize",c.value)});let E=r("0"),C=r(null),V=r(""),L=r("");const Q=b(()=>x.getters["user/list"]),g=function(){const a=Q.value[parseInt(E.value)].data;h.value=a.hero_equips.filter(l=>A.value.indexOf(l.mainAttr.type)!==-1&&l.quality===6&&w.value.indexOf(l.level)!==-1&&D.value.indexOf(l.pos)!==-1&&(L.value>0?L.value===l.suit_id:!0)).filter(l=>V.value==="1"?l.randomAttrsLength===4:V.value==="2"?l.randomAttrsLength!==4:!0).sort((l,e)=>e.born-l.born),C.value&&typeof C.value.clearSort=="function"&&C.value.clearSort()};return ce(),g(),(a,l)=>(u(),f("div",Ve,[s(t(pe),{modelValue:t(E),"onUpdate:modelValue":l[0]||(l[0]=e=>p(E)?E.value=e:E=e),size:"small",type:"card",onTabClick:le},{default:o(()=>[(u(!0),f(y,null,k(t(Q),(e,n)=>(u(),T(t(xe),{label:e.data.player.name,name:`${n}`,key:`user-${n}`},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),i("div",Le,[i("div",Se,[Te,s(t(S),{label:"all",modelValue:t(P),"onUpdate:modelValue":l[1]||(l[1]=e=>p(P)?P.value=e:P=e),onChange:ae,indeterminate:t(Y)},{default:o(()=>[qe]),_:1},8,["modelValue","indeterminate"]),Pe,s(t(R),{onChange:ne,modelValue:t(A),"onUpdate:modelValue":l[2]||(l[2]=e=>p(A)?A.value=e:A=e)},{default:o(()=>[(u(!0),f(y,null,k(t(q),e=>(u(),T(t(S),{label:e.key,key:e.key},{default:o(()=>[v(m(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),s(t(ge),{content:"\u672C\u9875\u9762\u53EA\u663E\u793A6\u661F\u5FA1\u9B42\uFF0C\u975E6\u661F\u4E0D\u4E88\u8003\u8651",placement:"left-start"},{default:o(()=>[s(t(Ae),{size:"mini",type:"info"},{default:o(()=>[ze]),_:1})]),_:1})]),i("div",Ue,[i("div",Ee,[Ie,s(t(S),{label:"all",modelValue:t(z),"onUpdate:modelValue":l[3]||(l[3]=e=>p(z)?z.value=e:z=e),onChange:se,indeterminate:t(B)},{default:o(()=>[je]),_:1},8,["modelValue","indeterminate"]),Oe,s(t(R),{onChange:oe,modelValue:t(w),"onUpdate:modelValue":l[4]||(l[4]=e=>p(w)?w.value=e:w=e)},{default:o(()=>[(u(),f(y,null,k(16,e=>s(t(S),{label:e-1,key:e-1},{default:o(()=>[v(m(e-1)+"\u7EA7",1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])])]),i("div",Me,[i("div",Ne,[De,s(t(S),{label:"all",modelValue:t(U),"onUpdate:modelValue":l[5]||(l[5]=e=>p(U)?U.value=e:U=e),onChange:ie,indeterminate:t(F)},{default:o(()=>[Ye]),_:1},8,["modelValue","indeterminate"]),Be,s(t(R),{onChange:ue,modelValue:D.value,"onUpdate:modelValue":l[6]||(l[6]=e=>D.value=e)},{default:o(()=>[(u(),f(y,null,k(6,e=>s(t(S),{label:e-1,key:e},{default:o(()=>[v(m(K(e))+"\u53F7\u4F4D",1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),i("div",Fe,[Re,t(G)?(u(),T(t(W),{key:0,modelValue:t(L),"onUpdate:modelValue":l[7]||(l[7]=e=>p(L)?L.value=e:L=e),clearable:"",size:"mini",placeholder:"\u53EF\u9009\u62E9\u8FC7\u6EE4\u79CD\u7C7B","no-data-text":"\u5168\u90E8",onChange:g},{default:o(()=>[(u(!0),f(y,null,k(t(G),e=>(u(),T(t(X),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):j("",!0)]),i("div",Ge,[He,s(t(W),{modelValue:t(V),"onUpdate:modelValue":l[8]||(l[8]=e=>p(V)?V.value=e:V=e),clearable:"",size:"mini",placeholder:"\u53EF\u9009\u5219\u526F\u5C5E\u6027\u6570\u91CF","no-data-text":"\u5168\u90E8",onChange:g},{default:o(()=>[(u(!0),f(y,null,k(te.value,e=>(u(),T(t(X),{key:e.key,label:e.name,value:`${e.key}`},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),i("div",null,[s(t(he),{data:t(de),onSortChange:re,"highlight-current-row":"",stripe:"",border:"",ref:(e,n)=>{n.equipTableRef=e,p(C)?C.value=e:C=e},style:{width:"100%"}},{default:o(()=>[s(t(_),{type:"index",fixed:"left",width:"50"}),s(t(_),{prop:"pos",label:"\u4F4D\u7F6E",width:"50",fixed:"left"},{default:o(e=>[v(m(K(e.row.pos+1)),1)]),_:1}),s(t(_),{width:"50",prop:"level",label:"\u7B49\u7EA7",fixed:"left"}),s(t(_),{label:"\u5FA1\u9B42\u7C7B\u578B",width:"80",fixed:"left"},{default:o(e=>[v(m(t(J)[`${e.row.suit_id}`]),1)]),_:1}),s(t(_),{label:"\u4E3B\u5C5E\u6027",width:"130",fixed:"left"},{default:o(e=>[i("div",Ke,[i("div",Qe,m(H(e.row.mainAttr.type)),1),e.row.single_attrs.length>0?(u(),f("div",We,"\xA0|\xA0"+m(H(e.row.single_attrs[0].type)),1)):j("",!0)])]),_:1}),(u(!0),f(y,null,k(t($),e=>(u(),T(t(_),{label:e.name,"min-width":"125",align:"left",sortable:"custom",prop:e.key,key:e.key},{default:o(n=>[i("div",Xe,[n.row.mainAttr.type===e.key?(u(),f("div",Ze,m(n.row.mainAttr.value),1)):j("",!0),n.row[`${e.key}`]?(u(),f("div",Je,m(n.row.mainAttr.type===e.key?"\xA0+":"")+m(n.row[`${e.key}`].toFixed(2)),1)):j("",!0),n.row.single_attrs.length>0&&n.row.single_attrs[0].type===e.key?(u(),f("div",$e,"\xA0+"+m(n.row.single_attrs[0].value),1)):j("",!0)])]),_:2},1032,["label","prop"]))),128)),s(t(_),{label:"\u817F",width:"50",fixed:"right",prop:"randomAttrsLength"}),s(t(_),{label:"\u83B7\u5F97\u65F6\u95F4",width:"150",fixed:"right"},{default:o(e=>[i("div",et,m(t(Z)(new Date((e.row.born-new Date().getTimezoneOffset()*60)*1e3),"YYYY-MM-DD HH:mm")),1)]),_:1})]),_:1},8,["data"])]),i("div",tt,[s(t(_e),{layout:"prev, pager, next, jumper, sizes, total",currentPage:t(d),"onUpdate:currentPage":l[9]||(l[9]=e=>p(d)?d.value=e:d=e),pageSize:t(c),"onUpdate:pageSize":l[10]||(l[10]=e=>p(c)?c.value=e:c=e),"page-sizes":[5,10,15,20,40,100],total:t(h).length},null,8,["currentPage","pageSize","total"])])]))}const nt=Object.assign(lt,{setup:at});var ct=we(nt,[["__scopeId","data-v-30bcd6a8"]]);export{ct as default};
