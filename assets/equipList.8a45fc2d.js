import{a as ve,u as me,K as y,e as r,S as ge,o as u,j as v,i as s,l as t,T as he,L as h,w as o,h as i,M as S,N as R,U as _e,g as T,V as W,p as I,O as pe,W as be,X as ye,Y as ke,m,Z as Ae,F as k,k as A,_ as xe,t as f,$ as Ce,a0 as X,Q as b,R as we}from"./vendor.2958960a.js";import{_ as Ve,u as Le,a as M}from"./index.1f461d96.js";const N=O=>(ye("data-v-3f7f8057"),O=O(),ke(),O),Se={class:"page-equip-list"},Te={class:"flex between",style:{"margin-bottom":"8px"}},qe={class:"flex"},ze=N(()=>i("div",null,"\u4E3B\u5C5E\u6027\uFF1A",-1)),Pe=m(" \u5168\u90E8\xA0\xA0 "),Ee=m(" \xA0 "),Ue=m(" ? "),Ie={class:"flex",style:{"margin-bottom":"8px"}},Me={class:"flex"},Ne=N(()=>i("div",null,"\u7B49\u7EA7\uFF1A",-1)),Oe=m(" \u5168\u90E8\xA0\xA0 "),De=m(" \xA0 "),Ye={class:"flex",style:{"margin-bottom":"8px"}},Be={class:"flex"},Fe=N(()=>i("div",null,"\u4F4D\u7F6E\uFF1A",-1)),je=m(" \u5168\u90E8\xA0\xA0 "),Re=m(" \xA0 "),He={class:"flex",style:{"margin-left":"60px"}},Ge=N(()=>i("div",null,"\u79CD\u7C7B\uFF1A",-1)),Ke={class:"flex",style:{"margin-left":"40px"}},Qe=N(()=>i("div",null,"\u526F\u5C5E\u6027\uFF1A",-1)),We={class:"flex attr-name"},Xe={class:"main"},Ze={key:0,class:"fixed-name"},Je={class:"flex"},$e={key:0,class:"attr-value main"},et={key:1,class:"attr-value random"},tt={key:2,class:"attr-value fixed-value"},lt={class:"born-time"},at={class:"flex center pagination-wrap"},nt=ve({name:"EquipList"}),st=Object.assign(nt,{setup(O){const{formatTime:Z}=Le(),x=me(),J=y(()=>x.getters.equipMap),$=y(()=>x.getters.effectiveAttrList),H=y(()=>x.state.equipList),ee=y(()=>x.getters.allAttrMap),G=function(a){return ee.value[a]},K=function(a){return M.transNumberToChinese(a)},te=r([{key:"1",name:"4\u817F"},{key:"2",name:"\u7638\u817F"}]),le=function(){Ae(()=>{g()})},q=y(()=>x.getters.allAttrList);let C=r(q.value.map(a=>a.key)),Y=r(!1);const ae=function(a){C.value=a?q.value.map(l=>l.key):[],Y.value=!1,d.value=1,g()};let z=r(!0);const ne=function(a){z.value=q.value.length===a.length,Y.value=a.length>0&&a.length<q.value.length,d.value=1,g()};let w=r([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),B=r(!1);const se=function(a){w.value=a?[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]:[],B.value=!1,d.value=1,g()};let P=r(!0);const oe=function(a){P.value=a.length===16,B.value=a.length>0&&a.length<16,d.value=1,g()};let E=r(!0),F=r(!1);const D=r([0,1,2,3,4,5]),ie=function(a){D.value=a?[0,1,2,3,4,5]:[],F.value=!1,d.value=1,g()},ue=function(a){E.value=a.length===6,F.value=a.length>0&&a.length<6,d.value=1,g()},re=function({prop:a,order:l}){let e=(n,p)=>p.born-n.born;l==="descending"?e=(n,p)=>M.getAttrSum(p,a)-M.getAttrSum(n,a):l==="ascending"&&(e=(n,p)=>M.getAttrSum(n,a)-M.getAttrSum(p,a)),a==="effectAttrCount"&&(l==="descending"?e=(n,p)=>p.effectAttrCount-n.effectAttrCount:l==="ascending"&&(e=(n,p)=>n.effectAttrCount-p.effectAttrCount)),_.value=_.value.sort(e).map(n=>n)};let d=r(1),c=r(10),_=r([]);const de=y(()=>_.value.length<c.value?_.value:_.value.slice((d.value-1)*c.value,_.value.length>d.value*c.value?d.value*c.value:_.value.length)),fe=function(a,l){return l===0&&a<=2||l===15&&a<=4},ce=function(){const a=localStorage.getItem("equipListPageSize");a?c.value=parseInt(a):localStorage.setItem("equipListPageSize",c.value)};ge(c,()=>{d.value=1,localStorage.setItem("equipListPageSize",c.value)});let U=r("0"),j=r(null),V=r(""),L=r("");const Q=y(()=>x.getters["user/list"]),g=function(){const a=Q.value[parseInt(U.value)].data;_.value=a.hero_equips.filter(l=>C.value.indexOf(l.mainAttr.type)!==-1&&l.quality===6&&w.value.indexOf(l.level)!==-1&&D.value.indexOf(l.pos)!==-1&&(L.value>0?L.value===l.suit_id:!0)).filter(l=>V.value==="1"?l.randomAttrsLength===4:V.value==="2"?l.randomAttrsLength!==4:!0).sort((l,e)=>e.born-l.born),j.value&&typeof j.value.clearSort=="function"&&j.value.clearSort()};return ce(),g(),(a,l)=>(u(),v("div",Se,[s(t(he),{modelValue:t(U),"onUpdate:modelValue":l[0]||(l[0]=e=>h(U)?U.value=e:U=e),size:"small",type:"card",onTabClick:le},{default:o(()=>[(u(!0),v(k,null,A(t(Q),(e,n)=>(u(),T(t(xe),{key:`user-${n}`,label:e.data.player.name,name:`${n}`},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),i("div",Te,[i("div",qe,[ze,s(t(S),{modelValue:t(z),"onUpdate:modelValue":l[1]||(l[1]=e=>h(z)?z.value=e:z=e),label:"all",indeterminate:t(Y),onChange:ae},{default:o(()=>[Pe]),_:1},8,["modelValue","indeterminate"]),Ee,s(t(R),{modelValue:t(C),"onUpdate:modelValue":l[2]||(l[2]=e=>h(C)?C.value=e:C=e),onChange:ne},{default:o(()=>[(u(!0),v(k,null,A(t(q),e=>(u(),T(t(S),{key:e.key,label:e.key},{default:o(()=>[m(f(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),s(t(_e),{content:"\u672C\u9875\u9762\u53EA\u663E\u793A6\u661F\u5FA1\u9B42, \u975E6\u661F\u4E0D\u4E88\u8003\u8651. \u6536\u76CA\u6B21\u6570\u8BA1\u7B97\u4EC5\u4F9B\u53C2\u8003, \u6839\u636E\u81EA\u8EAB\u7EC3\u5EA6\u53EF\u8003\u8651\u5F03\u7F6E\u6807\u7EA2\u7684\u5FA1\u9B42",placement:"left-start"},{default:o(()=>[s(t(Ce),{size:"small",type:"info"},{default:o(()=>[Ue]),_:1})]),_:1},8,["content"])]),i("div",Ie,[i("div",Me,[Ne,s(t(S),{modelValue:t(P),"onUpdate:modelValue":l[3]||(l[3]=e=>h(P)?P.value=e:P=e),label:"all",indeterminate:t(B),onChange:se},{default:o(()=>[Oe]),_:1},8,["modelValue","indeterminate"]),De,s(t(R),{modelValue:t(w),"onUpdate:modelValue":l[4]||(l[4]=e=>h(w)?w.value=e:w=e),onChange:oe},{default:o(()=>[(u(),v(k,null,A(16,e=>s(t(S),{key:e-1,label:e-1},{default:o(()=>[m(f(e-1)+"\u7EA7 ",1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])])]),i("div",Ye,[i("div",Be,[Fe,s(t(S),{modelValue:t(E),"onUpdate:modelValue":l[5]||(l[5]=e=>h(E)?E.value=e:E=e),label:"all",indeterminate:t(F),onChange:ie},{default:o(()=>[je]),_:1},8,["modelValue","indeterminate"]),Re,s(t(R),{modelValue:D.value,"onUpdate:modelValue":l[6]||(l[6]=e=>D.value=e),onChange:ue},{default:o(()=>[(u(),v(k,null,A(6,e=>s(t(S),{key:e,label:e-1},{default:o(()=>[m(f(K(e))+"\u53F7\u4F4D ",1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),i("div",He,[Ge,t(H)?(u(),T(t(W),{key:0,modelValue:t(L),"onUpdate:modelValue":l[7]||(l[7]=e=>h(L)?L.value=e:L=e),clearable:"",size:"mini",placeholder:"\u53EF\u9009\u62E9\u8FC7\u6EE4\u79CD\u7C7B","no-data-text":"\u5168\u90E8",onChange:g},{default:o(()=>[(u(!0),v(k,null,A(t(H),e=>(u(),T(t(X),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):I("",!0)]),i("div",Ke,[Qe,s(t(W),{modelValue:t(V),"onUpdate:modelValue":l[8]||(l[8]=e=>h(V)?V.value=e:V=e),clearable:"",size:"mini",placeholder:"\u53EF\u9009\u5219\u526F\u5C5E\u6027\u6570\u91CF","no-data-text":"\u5168\u90E8",onChange:g},{default:o(()=>[(u(!0),v(k,null,A(te.value,e=>(u(),T(t(X),{key:e.key,label:e.name,value:`${e.key}`},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),i("div",null,[s(t(pe),{data:t(de),"highlight-current-row":"",stripe:"",border:"",style:{width:"100%"},onSortChange:re},{default:o(()=>[s(t(b),{type:"index",fixed:"left",width:"50"}),s(t(b),{prop:"pos",label:"\u4F4D\u7F6E",width:"60",fixed:"left"},{default:o(e=>[m(f(K(e.row.pos+1)),1)]),_:1}),s(t(b),{width:"60",prop:"level",label:"\u7B49\u7EA7",fixed:"left"}),s(t(b),{label:"\u5FA1\u9B42\u7C7B\u578B",width:"90",fixed:"left"},{default:o(e=>[m(f(t(J)[`${e.row.suit_id}`]),1)]),_:1}),s(t(b),{label:"\u4E3B\u5C5E\u6027",width:"140",fixed:"left"},{default:o(e=>[i("div",We,[i("div",Xe,f(G(e.row.mainAttr.type)),1),e.row.single_attrs.length>0?(u(),v("div",Ze," \xA0|\xA0"+f(G(e.row.single_attrs[0].type)),1)):I("",!0)])]),_:1}),(u(!0),v(k,null,A(t($),e=>(u(),T(t(b),{key:e.key,label:e.name,"min-width":"125",align:"left",sortable:"custom",prop:e.key},{default:o(n=>[i("div",Je,[n.row.mainAttr.type===e.key?(u(),v("div",$e,f(n.row.mainAttr.value),1)):I("",!0),n.row[`${e.key}`]?(u(),v("div",et,f(n.row.mainAttr.type===e.key?"\xA0+":"")+f(n.row[`${e.key}`].toFixed(2)),1)):I("",!0),n.row.single_attrs.length>0&&n.row.single_attrs[0].type===e.key?(u(),v("div",tt," \xA0+"+f(n.row.single_attrs[0].value),1)):I("",!0)])]),_:2},1032,["label","prop"]))),128)),s(t(b),{label:"\u6536\u76CA",width:"80",fixed:"right",sortable:"custom",prop:"effectAttrCount"},{default:o(e=>[i("div",{class:we(["ava",{useless:fe(e.row.effectAttrCount,e.row.level)}])},f(e.row.effectAttrCount),3)]),_:1}),s(t(b),{label:"\u817F",width:"45",fixed:"right",prop:"randomAttrsLength"}),s(t(b),{label:"\u83B7\u5F97\u65F6\u95F4",width:"140",fixed:"right"},{default:o(e=>[i("div",lt,f(t(Z)(new Date((e.row.born-new Date().getTimezoneOffset()*60)*1e3),"YYYY-MM-DD HH:mm")),1)]),_:1})]),_:1},8,["data"])]),i("div",at,[s(t(be),{currentPage:t(d),"onUpdate:currentPage":l[9]||(l[9]=e=>h(d)?d.value=e:d=e),pageSize:t(c),"onUpdate:pageSize":l[10]||(l[10]=e=>h(c)?c.value=e:c=e),layout:"prev, pager, next, jumper, sizes, total","page-sizes":[5,10,15,20,40,100],total:t(_).length},null,8,["currentPage","pageSize","total"])])]))}});var ut=Ve(st,[["__scopeId","data-v-3f7f8057"]]);export{ut as default};
