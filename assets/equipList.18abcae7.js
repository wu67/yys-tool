import{a as fe,u as ve,K as y,e as r,S as me,o as u,j as f,i as n,l as t,T as ge,L as h,w as s,h as i,M as L,N as H,U as he,g as S,V as W,p as I,O as _e,W as pe,X as ye,Y as be,m as v,Z as ke,F as b,k,_ as xe,t as m,$ as Ae,a0 as X,Q as p}from"./vendor.41670513.js";import{_ as we,u as Ce,a as M}from"./index.47f584a3.js";const N=O=>(ye("data-v-34f137e6"),O=O(),be(),O),Ve={class:"page-equip-list"},Le={class:"flex between",style:{"margin-bottom":"8px"}},Se={class:"flex"},Te=N(()=>i("div",null,"\u4E3B\u5C5E\u6027\uFF1A",-1)),qe=v(" \u5168\u90E8\xA0\xA0 "),ze=v(" \xA0 "),Pe=v(" ? "),Ee={class:"flex",style:{"margin-bottom":"8px"}},Ue={class:"flex"},Ie=N(()=>i("div",null,"\u7B49\u7EA7\uFF1A",-1)),Me=v(" \u5168\u90E8\xA0\xA0 "),Ne=v(" \xA0 "),Oe={class:"flex",style:{"margin-bottom":"8px"}},De={class:"flex"},je=N(()=>i("div",null,"\u4F4D\u7F6E\uFF1A",-1)),Ye=v(" \u5168\u90E8\xA0\xA0 "),Be=v(" \xA0 "),Fe={class:"flex",style:{"margin-left":"60px"}},He=N(()=>i("div",null,"\u79CD\u7C7B\uFF1A",-1)),Re={class:"flex",style:{"margin-left":"40px"}},Ge=N(()=>i("div",null,"\u526F\u5C5E\u6027\uFF1A",-1)),Ke={class:"flex attr-name"},Qe={class:"main"},We={key:0,class:"fixed-name"},Xe={class:"flex"},Ze={key:0,class:"attr-value main"},Je={key:1,class:"attr-value random"},$e={key:2,class:"attr-value fixed-value"},et={class:"born-time"},tt={class:"flex center pagination-wrap"},lt=fe({name:"EquipList"}),at=Object.assign(lt,{setup(O){const{formatTime:Z}=Ce(),x=ve(),J=y(()=>x.getters.equipMap),$=y(()=>x.getters.effectiveAttrList),R=y(()=>x.state.equipList),ee=y(()=>x.getters.allAttrMap),G=function(a){return ee.value[a]},K=function(a){return M.transNumberToChinese(a)},te=r([{key:"1",name:"4\u817F"},{key:"2",name:"\u7638\u817F"}]),le=function(){ke(()=>{g()})},T=y(()=>x.getters.allAttrList);let A=r(T.value.map(a=>a.key)),j=r(!1);const ae=function(a){A.value=a?T.value.map(l=>l.key):[],j.value=!1,d.value=1,g()};let q=r(!0);const ne=function(a){q.value=T.value.length===a.length,j.value=a.length>0&&a.length<T.value.length,d.value=1,g()};let w=r([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),Y=r(!1);const se=function(a){w.value=a?[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]:[],Y.value=!1,d.value=1,g()};let z=r(!0);const oe=function(a){z.value=a.length===16,Y.value=a.length>0&&a.length<16,d.value=1,g()};let P=r(!0),B=r(!1);const D=r([0,1,2,3,4,5]),ie=function(a){D.value=a?[0,1,2,3,4,5]:[],B.value=!1,d.value=1,g()},ue=function(a){P.value=a.length===6,B.value=a.length>0&&a.length<6,d.value=1,g()},re=function({prop:a,order:l}){let e=(o,U)=>U.born-o.born;l==="descending"?e=(o,U)=>M.getAttrSum(U,a)-M.getAttrSum(o,a):l==="ascending"&&(e=(o,U)=>M.getAttrSum(o,a)-M.getAttrSum(U,a)),_.value=_.value.sort(e).map(o=>o)};let d=r(1),c=r(10),_=r([]);const de=y(()=>_.value.length<c.value?_.value:_.value.slice((d.value-1)*c.value,_.value.length>d.value*c.value?d.value*c.value:_.value.length)),ce=function(){const a=localStorage.getItem("equipListPageSize");a?c.value=parseInt(a):localStorage.setItem("equipListPageSize",c.value)};me(c,()=>{d.value=1,localStorage.setItem("equipListPageSize",c.value)});let E=r("0"),F=r(null),C=r(""),V=r("");const Q=y(()=>x.getters["user/list"]),g=function(){const a=Q.value[parseInt(E.value)].data;_.value=a.hero_equips.filter(l=>A.value.indexOf(l.mainAttr.type)!==-1&&l.quality===6&&w.value.indexOf(l.level)!==-1&&D.value.indexOf(l.pos)!==-1&&(V.value>0?V.value===l.suit_id:!0)).filter(l=>C.value==="1"?l.randomAttrsLength===4:C.value==="2"?l.randomAttrsLength!==4:!0).sort((l,e)=>e.born-l.born),F.value&&typeof F.value.clearSort=="function"&&F.value.clearSort()};return ce(),g(),(a,l)=>(u(),f("div",Ve,[n(t(ge),{modelValue:t(E),"onUpdate:modelValue":l[0]||(l[0]=e=>h(E)?E.value=e:E=e),size:"small",type:"card",onTabClick:le},{default:s(()=>[(u(!0),f(b,null,k(t(Q),(e,o)=>(u(),S(t(xe),{key:`user-${o}`,label:e.data.player.name,name:`${o}`},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),i("div",Le,[i("div",Se,[Te,n(t(L),{modelValue:t(q),"onUpdate:modelValue":l[1]||(l[1]=e=>h(q)?q.value=e:q=e),label:"all",indeterminate:t(j),onChange:ae},{default:s(()=>[qe]),_:1},8,["modelValue","indeterminate"]),ze,n(t(H),{modelValue:t(A),"onUpdate:modelValue":l[2]||(l[2]=e=>h(A)?A.value=e:A=e),onChange:ne},{default:s(()=>[(u(!0),f(b,null,k(t(T),e=>(u(),S(t(L),{key:e.key,label:e.key},{default:s(()=>[v(m(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),n(t(he),{content:"\u672C\u9875\u9762\u53EA\u663E\u793A6\u661F\u5FA1\u9B42\uFF0C\u975E6\u661F\u4E0D\u4E88\u8003\u8651",placement:"left-start"},{default:s(()=>[n(t(Ae),{size:"mini",type:"info"},{default:s(()=>[Pe]),_:1})]),_:1})]),i("div",Ee,[i("div",Ue,[Ie,n(t(L),{modelValue:t(z),"onUpdate:modelValue":l[3]||(l[3]=e=>h(z)?z.value=e:z=e),label:"all",indeterminate:t(Y),onChange:se},{default:s(()=>[Me]),_:1},8,["modelValue","indeterminate"]),Ne,n(t(H),{modelValue:t(w),"onUpdate:modelValue":l[4]||(l[4]=e=>h(w)?w.value=e:w=e),onChange:oe},{default:s(()=>[(u(),f(b,null,k(16,e=>n(t(L),{key:e-1,label:e-1},{default:s(()=>[v(m(e-1)+"\u7EA7 ",1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])])]),i("div",Oe,[i("div",De,[je,n(t(L),{modelValue:t(P),"onUpdate:modelValue":l[5]||(l[5]=e=>h(P)?P.value=e:P=e),label:"all",indeterminate:t(B),onChange:ie},{default:s(()=>[Ye]),_:1},8,["modelValue","indeterminate"]),Be,n(t(H),{modelValue:D.value,"onUpdate:modelValue":l[6]||(l[6]=e=>D.value=e),onChange:ue},{default:s(()=>[(u(),f(b,null,k(6,e=>n(t(L),{key:e,label:e-1},{default:s(()=>[v(m(K(e))+"\u53F7\u4F4D ",1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),i("div",Fe,[He,t(R)?(u(),S(t(W),{key:0,modelValue:t(V),"onUpdate:modelValue":l[7]||(l[7]=e=>h(V)?V.value=e:V=e),clearable:"",size:"mini",placeholder:"\u53EF\u9009\u62E9\u8FC7\u6EE4\u79CD\u7C7B","no-data-text":"\u5168\u90E8",onChange:g},{default:s(()=>[(u(!0),f(b,null,k(t(R),e=>(u(),S(t(X),{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):I("",!0)]),i("div",Re,[Ge,n(t(W),{modelValue:t(C),"onUpdate:modelValue":l[8]||(l[8]=e=>h(C)?C.value=e:C=e),clearable:"",size:"mini",placeholder:"\u53EF\u9009\u5219\u526F\u5C5E\u6027\u6570\u91CF","no-data-text":"\u5168\u90E8",onChange:g},{default:s(()=>[(u(!0),f(b,null,k(te.value,e=>(u(),S(t(X),{key:e.key,label:e.name,value:`${e.key}`},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),i("div",null,[n(t(_e),{data:t(de),"highlight-current-row":"",stripe:"",border:"",style:{width:"100%"},onSortChange:re},{default:s(()=>[n(t(p),{type:"index",fixed:"left",width:"50"}),n(t(p),{prop:"pos",label:"\u4F4D\u7F6E",width:"50",fixed:"left"},{default:s(e=>[v(m(K(e.row.pos+1)),1)]),_:1}),n(t(p),{width:"50",prop:"level",label:"\u7B49\u7EA7",fixed:"left"}),n(t(p),{label:"\u5FA1\u9B42\u7C7B\u578B",width:"80",fixed:"left"},{default:s(e=>[v(m(t(J)[`${e.row.suit_id}`]),1)]),_:1}),n(t(p),{label:"\u4E3B\u5C5E\u6027",width:"130",fixed:"left"},{default:s(e=>[i("div",Ke,[i("div",Qe,m(G(e.row.mainAttr.type)),1),e.row.single_attrs.length>0?(u(),f("div",We," \xA0|\xA0"+m(G(e.row.single_attrs[0].type)),1)):I("",!0)])]),_:1}),(u(!0),f(b,null,k(t($),e=>(u(),S(t(p),{key:e.key,label:e.name,"min-width":"125",align:"left",sortable:"custom",prop:e.key},{default:s(o=>[i("div",Xe,[o.row.mainAttr.type===e.key?(u(),f("div",Ze,m(o.row.mainAttr.value),1)):I("",!0),o.row[`${e.key}`]?(u(),f("div",Je,m(o.row.mainAttr.type===e.key?"\xA0+":"")+m(o.row[`${e.key}`].toFixed(2)),1)):I("",!0),o.row.single_attrs.length>0&&o.row.single_attrs[0].type===e.key?(u(),f("div",$e," \xA0+"+m(o.row.single_attrs[0].value),1)):I("",!0)])]),_:2},1032,["label","prop"]))),128)),n(t(p),{label:"\u817F",width:"50",fixed:"right",prop:"randomAttrsLength"}),n(t(p),{label:"\u83B7\u5F97\u65F6\u95F4",width:"150",fixed:"right"},{default:s(e=>[i("div",et,m(t(Z)(new Date((e.row.born-new Date().getTimezoneOffset()*60)*1e3),"YYYY-MM-DD HH:mm")),1)]),_:1})]),_:1},8,["data"])]),i("div",tt,[n(t(pe),{currentPage:t(d),"onUpdate:currentPage":l[9]||(l[9]=e=>h(d)?d.value=e:d=e),pageSize:t(c),"onUpdate:pageSize":l[10]||(l[10]=e=>h(c)?c.value=e:c=e),layout:"prev, pager, next, jumper, sizes, total","page-sizes":[5,10,15,20,40,100],total:t(_).length},null,8,["currentPage","pageSize","total"])])]))}});var ot=we(at,[["__scopeId","data-v-34f137e6"]]);export{ot as default};
