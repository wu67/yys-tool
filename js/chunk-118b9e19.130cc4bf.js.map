{"version":3,"sources":["webpack:///./src/pages/equipAnalysis.vue?408c","webpack:///src/pages/equipAnalysis.vue","webpack:///./src/pages/equipAnalysis.vue?c611","webpack:///./src/pages/equipAnalysis.vue","webpack:///./src/pages/equipAnalysis.vue?3ae9","webpack:///./src/pages/equipAnalysis.vue?15da"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","user","userList","length","attrs","on","changeUser","model","value","callback","$$v","currentUser","expression","_l","u","userIndex","key","data","player","name","_e","directives","rawName","equip","equipIndex","class","importantSuit","indexOf","id","slot","_s","p","pIndex","transNumberToChinese","toFixed","allAttrNickMap","mainAttr","staticRenderFns","mixins","components","filters","props","aData","loading","computed","watch","created","initData","mounted","updated","beforeDestroy","methods","equipList","map","position","item","single_attrs","born","level","pos","quality","suit_id","type","base_attr","result","push","temp","forEach","finalEquipData","speed","sort","setTimeout","$nextTick","getAttrSum","sum","attrName","multiply","parseFloat","mathjs","component"],"mappings":"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","file":"js/chunk-118b9e19.130cc4bf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-equip-analysis\"},[_c('div',{staticClass:\"herder\"},[_c('h2',[_vm._v(\"满速套装分析\")]),_c('h5',[_vm._v(\"用于分析某一套装的速度短板，方便赌魂/爆肝\")]),(_vm.user.userList.length > 1)?_c('el-tabs',{attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.changeUser},model:{value:(_vm.currentUser),callback:function ($$v) {_vm.currentUser=$$v},expression:\"currentUser\"}},_vm._l((_vm.user.userList),function(u,userIndex){return _c('el-tab-pane',{key:userIndex,attrs:{\"label\":u.data.player.name}})}),1):_vm._e()],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"flex wrap\"},_vm._l((_vm.aData),function(equip,equipIndex){return _c('el-card',{key:equipIndex,staticClass:\"equip-item\",class:{ 'important': _vm.importantSuit.indexOf(equip.id) !== -1 },attrs:{\"shadow\":\"hover\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',[_vm._v(_vm._s(equip.name))])]),_vm._l((equip.position),function(p,pIndex){return _c('div',{key:pIndex,staticClass:\"position\"},[_c('div',{staticClass:\"flex analysis-item\"},[_c('div',[_vm._v(\"位置\"+_vm._s(_vm.transNumberToChinese(pIndex + 1))+\": \")]),(p.length > 0)?_c('div',{staticClass:\"analysis-value\",class:{\n                'neck': (pIndex !==1 && p[0].value  > 13) || (pIndex === 1 && p[0].value  > (57 + 13)),\n                'full': (pIndex !==1 && p[0].value  > 15) || (pIndex === 1 && p[0].value  > (57 + 15)),\n                'rare': (pIndex !==1 && p[0].value  > 16.5) || (pIndex === 1 && p[0].value  > (57 + 16.5)),\n                'extreme': (pIndex !==1 && p[0].value  > 17) || (pIndex === 1 && p[0].value  > (57 + 17)),\n                'european': (pIndex !==1 && p[0].value  > 17.5) || (pIndex === 1 && p[0].value  > (57 + 17.5)),\n              }},[(pIndex === 1 && p[0].value > 59)?_c('div',[_vm._v(_vm._s((p[0].value - 57).toFixed(2)))]):(pIndex !== 1 && p[0].value > 0)?_c('div',[_vm._v(_vm._s(p[0].value.toFixed(2)))]):_vm._e()]):_vm._e(),(p.length > 0 && (pIndex === 3 || pIndex === 5) && p[0].value > 15)?_c('div',{staticClass:\"analysis-main-attr\"},[_vm._v(_vm._s(_vm.allAttrNickMap[(\"\" + (p[0].mainAttr.type))]))]):_vm._e()])])})],2)}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-equip-analysis\">\n    <div class=\"herder\">\n      <h2>满速套装分析</h2>\n      <h5>用于分析某一套装的速度短板，方便赌魂/爆肝</h5>\n      <el-tabs v-model=\"currentUser\"\n               v-if=\"user.userList.length > 1\"\n               type=\"card\"\n               @tab-click=\"changeUser\">\n        <el-tab-pane :label=\"u.data.player.name\"\n                     v-for=\"(u, userIndex) in user.userList\"\n                     :key=\"userIndex\"></el-tab-pane>\n      </el-tabs>\n    </div>\n    <div class=\"flex wrap\" v-loading=\"loading\">\n      <el-card\n        class=\"equip-item\"\n        :class=\"{ 'important': importantSuit.indexOf(equip.id) !== -1 }\"\n        shadow=\"hover\"\n        v-for=\"(equip, equipIndex) in aData\"\n        :key=\"equipIndex\">\n        <div slot=\"header\">\n          <div>{{ equip.name }}</div>\n        </div>\n        <div class=\"position\" v-for=\"(p, pIndex) in equip.position\" :key=\"pIndex\">\n          <div class=\"flex analysis-item\">\n<!--            <div v-for=\"(speed, speedIndex) in p\" :key=\"speedIndex\">{{ speed }}</div>-->\n            <div>位置{{ transNumberToChinese(pIndex + 1) }}:&nbsp;</div>\n            <div\n              v-if=\"p.length > 0\"\n              class=\"analysis-value\"\n              :class=\"{\n                'neck': (pIndex !==1 && p[0].value  > 13) || (pIndex === 1 && p[0].value  > (57 + 13)),\n                'full': (pIndex !==1 && p[0].value  > 15) || (pIndex === 1 && p[0].value  > (57 + 15)),\n                'rare': (pIndex !==1 && p[0].value  > 16.5) || (pIndex === 1 && p[0].value  > (57 + 16.5)),\n                'extreme': (pIndex !==1 && p[0].value  > 17) || (pIndex === 1 && p[0].value  > (57 + 17)),\n                'european': (pIndex !==1 && p[0].value  > 17.5) || (pIndex === 1 && p[0].value  > (57 + 17.5)),\n              }\"\n            >\n              <!-- 二号位置仅显示双速的 -->\n              <div v-if=\"pIndex === 1 && p[0].value > 59\">{{ (p[0].value - 57).toFixed(2) }}</div>\n              <div v-else-if=\"pIndex !== 1 && p[0].value > 0\">{{ p[0].value.toFixed(2) }}</div>\n            </div>\n\n            <div\n              v-if=\"p.length > 0 && (pIndex === 3 || pIndex === 5) && p[0].value > 15\"\n              class=\"analysis-main-attr\"\n            >{{ allAttrNickMap[`${p[0].mainAttr.type}`] }}</div>\n          </div>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  mapState,\n  mapGetters\n} from 'vuex'\nimport mathjs from '@/utils/mathjs'\nimport baseMixin from '@/mixin'\n\nexport default {\n  name: 'equipAnalysis',\n  mixins: [\n    baseMixin\n  ],\n  components: {},\n  filters: {},\n  props: {},\n  data () {\n    return {\n      // 重点套装 版本之子\n      importantSuit: [\n        300002,\n        300010,\n        300012,\n        300013,\n        300015,\n        300019,\n        300021,\n        300023,\n        300034,\n        300035,\n        300079\n      ],\n      currentUser: 0,\n      aData: [],\n      loading: false\n    }\n  },\n  computed: {\n    ...mapState([\n      'user',\n      'equipList',\n      'notPercentAttr'\n    ]),\n    ...mapGetters([\n      'allAttrNickMap',\n    ])\n  },\n  watch: {},\n  created () {\n    this.initData()\n  },\n  mounted () {},\n  updated () {},\n  beforeDestroy () {},\n  methods: {\n    initData (attrName = 'Speed') {\n      this.loading = true\n      this.aData = this.equipList.map(equip => {\n        let finalEquipData = {\n          ...equip,\n          // 6个位置，按属性排序\n          position: [\n            [],\n            [],\n            [],\n            [],\n            [],\n            [],\n          ]\n        }\n        const userEquips = this.user.userList[parseInt(this.currentUser)].data.hero_equips\n        let temp = userEquips.map(item => {\n          const result = {\n            id: item.id,\n            single_attrs: [],\n            born: item.born,\n            level: item.level,\n            pos: item.pos,\n            quality: item.quality,\n            suit_id: item.suit_id,\n            mainAttr: {\n              type: item.base_attr.type\n            }\n          }\n          // 处理副属性\n          for (const rAttr of item.random_attrs) {\n            if (this.notPercentAttr.indexOf(rAttr.type) === -1) {\n              result[`${rAttr.type}`] = this.multiply(rAttr.value)\n            } else {\n              result[`${rAttr.type}`] = rAttr.value\n            }\n          }\n\n          // 处理主属性\n          if (this.notPercentAttr.indexOf(item.base_attr.type) === -1) {\n            result.mainAttr.value = this.multiply(item.base_attr.value)\n          } else {\n            result.mainAttr.value = item.base_attr.value\n          }\n\n          // 处理首领魂的固定属性 全是加成百分比属性. 当前版本最多只会有1条固定属性\n          if (item.single_attrs.length > 0) {\n            result.single_attrs.push({\n              type: item.single_attrs[0].type,\n              value: this.multiply(item.single_attrs[0].value)\n            })\n          }\n          return result\n        })\n        temp.forEach(item => {\n          if (item.suit_id === equip.id) {\n            let speed = this.getAttrSum(item, attrName)\n            finalEquipData.position[item.pos].push({\n              mainAttr: item.mainAttr,\n              value: speed\n            })\n          }\n        })\n\n        finalEquipData.position.forEach(item => {\n          item.sort((a, b) => (b.value - a.value))\n        })\n        return finalEquipData\n      })\n      setTimeout(() => {\n        this.loading = false\n      }, 500)\n    },\n    changeUser () {\n      this.$nextTick(() => {\n        this.initData()\n      })\n    },\n    // 计算单个御魂中某个属性的总值\n    getAttrSum (equip, attrName) {\n      let sum = 0\n      sum += equip[`${attrName}`] || 0\n\n      // 主属性\n      if (equip.mainAttr.type === attrName) {\n        sum = sum + equip.mainAttr.value\n      }\n      // （首领魂）固定属性\n      if (equip.single_attrs.length > 0 && equip.single_attrs[0].type === attrName) {\n        sum = sum + equip.single_attrs[0].value\n      }\n      return sum\n    },\n    multiply (value, ratio = 100) {\n      return parseFloat(mathjs.chain(value).multiply(ratio).done().toPrecision(12))\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.page-equip-analysis {\n  .el-card__header {\n    padding: 10px 10px 6px;\n  }\n\n  .el-card__body {\n    padding: 20px 10px 10px;\n  }\n}\n</style>\n<style lang=\"scss\"\n       scoped>\n@import \"~@/assets/css/flex-custom.scss\";\n\n.page-equip-analysis {\n  padding: 0 16px 20px;\n  height: 100%;\n  width: 1600px;\n  margin: 0 auto;\n}\n\n.herder {\n  margin: 0 auto;\n  width: 1600px;\n}\n\n.equip-item {\n  width: 140px;\n  min-height: 140px;\n  margin-right: 8px;\n  margin-bottom: 10px;\n\n  & + .equip-item {\n    //margin\n  }\n}\n\n.analysis-item {\n  margin-bottom: 4px;\n}\n\n.analysis-value {\n  padding: 0 4px;\n  border-radius: 4px;\n}\n\n.analysis-main-attr {\n  margin-left: 4px;\n  font-weight: 500;\n}\n\n.neck {\n  background-color: #E1FFFF;\n}\n\n.full {\n  background-color: Green;\n  color: #fff;\n  font-weight: 500;\n}\n\n.rare {\n  background-color: DarkOrange;\n  color: #fff;\n  font-weight: 500;\n}\n\n.extreme {\n  background-color: OrangeRed;\n  color: #fff;\n  font-weight: 500;\n}\n\n.european {\n  background-color: #9400D3;\n  color: #fff;\n  font-weight: 500;\n}\n\n.important {\n  border-color: #bbb;\n  background-color: #f6f6f6;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipAnalysis.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipAnalysis.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./equipAnalysis.vue?vue&type=template&id=3c8a8c3d&scoped=true&\"\nimport script from \"./equipAnalysis.vue?vue&type=script&lang=js&\"\nexport * from \"./equipAnalysis.vue?vue&type=script&lang=js&\"\nimport style0 from \"./equipAnalysis.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./equipAnalysis.vue?vue&type=style&index=1&id=3c8a8c3d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c8a8c3d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipAnalysis.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipAnalysis.vue?vue&type=style&index=1&id=3c8a8c3d&lang=scss&scoped=true&\""],"sourceRoot":""}