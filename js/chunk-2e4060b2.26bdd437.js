(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e4060b2"],{"27f9":function(t,e,a){"use strict";a("ee36")},a13e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-equip-list"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.changeUser},model:{value:t.currentUser,callback:function(e){t.currentUser=e},expression:"currentUser"}},t._l(t.user.userList,(function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.data.player.name}})})),1),a("div",{staticClass:"flex",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"flex"},[a("div",[t._v("主属性：")]),a("el-checkbox",{attrs:{label:"all",indeterminate:t.isIndeterminateAllAttr},on:{change:t.handleCheckAllAttrChange},model:{value:t.checkAllAttr,callback:function(e){t.checkAllAttr=e},expression:"checkAllAttr"}},[t._v("全部")]),t._v("  "),a("el-checkbox-group",{on:{change:t.handleCheckedAttrChange},model:{value:t.checkAttrList,callback:function(e){t.checkAttrList=e},expression:"checkAttrList"}},t._l(t.allAttrList,(function(e){return a("el-checkbox",{key:e.key,attrs:{label:e.key}},[t._v(t._s(e.name))])})),1)],1)]),a("div",{},[a("el-table",{ref:"equipTable",staticStyle:{width:"100%"},attrs:{data:t.computedList,"highlight-current-row":"",stripe:"",border:""},on:{"sort-change":t.onTableSortChange}},[a("el-table-column",{attrs:{type:"index",fixed:"left",width:"50"}}),a("el-table-column",{attrs:{prop:"pos",label:"位置",width:"50",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.transNumberToChinese(e.row.pos+1))+" ")]}}])}),a("el-table-column",{attrs:{width:"50",prop:"level",label:"等级",fixed:"left"}}),a("el-table-column",{attrs:{label:"御魂类型",width:"80",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.equipMap[""+e.row.suit_id])+" ")]}}])}),a("el-table-column",{attrs:{label:"主属性",width:"130",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex attr-name"},[a("div",{staticClass:"main"},[t._v(t._s(t.transAttrToName(e.row.mainAttr.type)))]),e.row.single_attrs.length>0?a("div",{staticClass:"fixed-name"},[t._v(" | "+t._s(t.transAttrToName(e.row.single_attrs[0].type)))]):t._e()])]}}])}),t._l(t.effectiveAttrList,(function(e){return a("el-table-column",{key:e.key,attrs:{label:e.name,"min-width":"125",align:"left",sortable:"custom",prop:e.key},scopedSlots:t._u([{key:"default",fn:function(n){return[a("div",{staticClass:"flex"},[n.row.mainAttr.type===e.key?a("div",{staticClass:"attr-value main"},[t._v(" "+t._s(n.row.mainAttr.value)+" ")]):t._e(),n.row[""+e.key]?a("div",{staticClass:"attr-value random"},[t._v(" "+t._s(n.row.mainAttr.type===e.key?" +":"")+t._s(n.row[""+e.key].toFixed(2))+" ")]):t._e(),n.row.single_attrs.length>0&&n.row.single_attrs[0].type===e.key?a("div",{staticClass:"attr-value fixed-value"},[t._v("  +"+t._s(n.row.single_attrs[0].value)+" ")]):t._e()])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"获得时间",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"born-time"},[t._v(t._s(t._f("formatTime")(new Date(1e3*e.row.born),"yyyy-MM-dd hh:mm")))])]}}])})],2)],1),a("div",{staticClass:"flex center pagination-wrap"},[a("el-pagination",{attrs:{layout:"prev, pager, next, jumper, sizes, total","current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":[5,10,15,20],total:t.list.length},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)],1)},i=[],r=a("b85c"),s=a("5530"),l=(a("fb6a"),a("d81d"),a("4e82"),a("4de4"),a("2f62")),c=a("01f2"),u=a("0712"),o={name:"equipList",mixins:[u["a"]],components:{},props:{},data:function(){return{currentUser:0,checkAllAttr:!0,isIndeterminateAllAttr:!1,checkAttrList:[],list:[],currentPage:1,pageSize:10}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["c"])(["user","equipList","notPercentAttr"])),Object(l["b"])(["equipMap","allAttrMap","allAttrList","effectiveAttrList"])),{},{computedList:function(){return this.list.length<this.pageSize?this.list:this.list.slice((this.currentPage-1)*this.pageSize,this.list.length>this.currentPage*this.pageSize?this.currentPage*this.pageSize:this.list.length)}}),watch:{},created:function(){this.checkAttrList=this.allAttrList.map((function(t){return t.key})),this.initData()},updated:function(){},beforeDestroy:function(){},methods:{changeUser:function(){var t=this;this.$nextTick((function(){t.initData()}))},handleCheckAllAttrChange:function(t){this.checkAttrList=t?this.allAttrList.map((function(t){return t.key})):[],this.isIndeterminateAllAttr=!1,this.currentPage=1,this.initData()},handleCheckedAttrChange:function(t){this.checkAllAttr=this.allAttrList.length===t.length,this.isIndeterminateAllAttr=t.length>0&&t.length<this.allAttrList.length,this.currentPage=1,this.initData()},initData:function(){var t=this,e=this.user.userList[parseInt(this.currentUser)].data;this.list=e.hero_equips.map((function(e){var a,n={id:e.id,single_attrs:[],born:e.born,level:e.level,pos:e.pos,quality:e.quality,suit_id:e.suit_id,mainAttr:{type:e.base_attr.type}},i=Object(r["a"])(e.random_attrs);try{for(i.s();!(a=i.n()).done;){var s=a.value;-1===t.notPercentAttr.indexOf(s.type)?n["".concat(s.type)]=t.multiply(s.value):n["".concat(s.type)]=s.value}}catch(l){i.e(l)}finally{i.f()}return-1===t.notPercentAttr.indexOf(e.base_attr.type)?n.mainAttr.value=t.multiply(e.base_attr.value):n.mainAttr.value=e.base_attr.value,e.single_attrs.length>0&&n.single_attrs.push({type:e.single_attrs[0].type,value:t.multiply(e.single_attrs[0].value)}),n})).filter((function(e){return-1!==t.checkAttrList.indexOf(e.mainAttr.type)})).sort((function(t,e){return e.born-t.born})),this.$refs.equipTable&&"function"===typeof this.$refs.equipTable.clearSort&&this.$refs.equipTable.clearSort()},onTableSortChange:function(t){var e=this,a=t.prop,n=t.order,i=function(t,e){return e.born-t.born};"descending"===n?i=function(t,n){return e.getAttrSum(n,a)-e.getAttrSum(t,a)}:"ascending"===n&&(i=function(t,n){return e.getAttrSum(t,a)-e.getAttrSum(n,a)}),this.list=this.list.sort(i).map((function(t){return t}))},getAttrSum:function(t,e){var a=0;return a+=t["".concat(e)]||0,t.mainAttr.type===e&&(a+=t.mainAttr.value),t.single_attrs.length>0&&t.single_attrs[0].type===e&&(a+=t.single_attrs[0].value),a},transAttrToName:function(t){return this.allAttrMap[t]},multiply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return parseFloat(c["a"].chain(t).multiply(e).done().toPrecision(12))}}},h=o,p=(a("27f9"),a("2877")),d=Object(p["a"])(h,n,i,!1,null,"3b7d3b26",null);e["default"]=d.exports},ee36:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2e4060b2.26bdd437.js.map