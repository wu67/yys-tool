(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c67d5512"],{"00bb":function(e,t,n){},"04d1":function(e,t,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"38d1":function(e,t,n){"use strict";n("56f9")},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,a=n("1dde"),o=a("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4e82":function(e,t,n){"use strict";var r=n("23e7"),i=n("1c0b"),a=n("7b0b"),o=n("50c4"),c=n("577e"),s=n("d039"),l=n("addb"),u=n("a640"),d=n("04d1"),f=n("d998"),h=n("2d00"),v=n("512ce"),b=[],p=b.sort,m=s((function(){b.sort(void 0)})),g=s((function(){b.sort(null)})),y=u("sort"),x=!s((function(){if(h)return h<70;if(!(d&&d>3)){if(f)return!0;if(v)return v<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)b.push({k:t+r,v:n})}for(b.sort((function(e,t){return t.v-e.v})),r=0;r<b.length;r++)t=b[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),k=m||!g||!y||!x,I=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:k},{sort:function(e){void 0!==e&&i(e);var t=a(this);if(x)return void 0===e?p.call(t):p.call(t,e);var n,r,c=[],s=o(t.length);for(r=0;r<s;r++)r in t&&c.push(t[r]);c=l(c,I(e)),n=c.length,r=0;while(r<n)t[r]=c[r++];while(r<s)delete t[r++];return t}})},"512ce":function(e,t,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"56f9":function(e,t,n){},5842:function(e,t,n){"use strict";n("00bb")},6062:function(e,t,n){"use strict";var r=n("6d61"),i=n("6566");e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(e,t,n){"use strict";var r=n("9bf2").f,i=n("7c73"),a=n("e2cc"),o=n("0366"),c=n("19aa"),s=n("2266"),l=n("7dd0"),u=n("2626"),d=n("83ab"),f=n("f183").fastKey,h=n("69f3"),v=h.set,b=h.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,r){c(e,u,t),v(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=r&&s(r,e[l],{that:e,AS_ENTRIES:n})})),h=b(t),p=function(e,t,n){var r,i,a=h(e),o=m(e,t);return o?o.value=n:(a.last=o={index:i=f(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=o),r&&(r.next=o),d?a.size++:e.size++,"F"!==i&&(a.index[i]=o)),e},m=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(u.prototype,{clear:function(){var e=this,t=h(e),n=t.index,r=t.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=h(t),r=m(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),d?n.size--:t.size--}return!!r},forEach:function(e){var t,n=h(this),r=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){r(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),a(u.prototype,n?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return p(this,0===e?0:e,t)}}:{add:function(e){return p(this,e=0===e?0:e,e)}}),d&&r(u.prototype,"size",{get:function(){return h(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",i=b(t),a=b(r);l(e,t,(function(e,t){v(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=a(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},"6d61":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("94ca"),o=n("6eeb"),c=n("f183"),s=n("2266"),l=n("19aa"),u=n("861d"),d=n("d039"),f=n("1c7e"),h=n("d44e"),v=n("7156");e.exports=function(e,t,n){var b=-1!==e.indexOf("Map"),p=-1!==e.indexOf("Weak"),m=b?"set":"add",g=i[e],y=g&&g.prototype,x=g,k={},I=function(e){var t=y[e];o(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(p&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return p&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(p&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})},w=a(e,"function"!=typeof g||!(p||y.forEach&&!d((function(){(new g).entries().next()}))));if(w)x=n.getConstructor(t,e,b,m),c.enable();else if(a(e,!0)){var S=new x,O=S[m](p?{}:-0,1)!=S,N=d((function(){S.has(1)})),_=f((function(e){new g(e)})),L=!p&&d((function(){var e=new g,t=5;while(t--)e[m](t,t);return!e.has(-0)}));_||(x=t((function(t,n){l(t,x,e);var r=v(new g,t,x);return void 0!=n&&s(n,r[m],{that:r,AS_ENTRIES:b}),r})),x.prototype=y,y.constructor=x),(N||L)&&(I("delete"),I("has"),b&&I("get")),(L||O)&&I(m),p&&y.clear&&delete y.clear}return k[e]=x,r({global:!0,forced:x!=g},k),h(x,e),p||n.setStrong(x,e,b),x}},7156:function(e,t,n){var r=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var a,o;return i&&"function"==typeof(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&i(e,o),e}},a81e:function(e,t,n){},addb:function(e,t){var n=Math.floor,r=function(e,t){var o=e.length,c=n(o/2);return o<8?i(e,t):a(r(e.slice(0,c),t),r(e.slice(c),t),t)},i=function(e,t){var n,r,i=e.length,a=1;while(a<i){r=a,n=e[a];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},a=function(e,t,n){var r=e.length,i=t.length,a=0,o=0,c=[];while(a<r||o<i)a<r&&o<i?c.push(n(e[a],t[o])<=0?e[a++]:t[o++]):c.push(a<r?e[a++]:t[o++]);return c};e.exports=r},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),a=n("df75"),o=n("d039"),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(e){return a(i(e))}})},ba2e:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-shards-list"},[e.dialogSetNotIncludedVisible?n("dialogSetNotIncluded",{attrs:{show:e.dialogSetNotIncludedVisible,notIncluded:e.notIncludedList[e.currentEditNotIncludedUserIndex],userName:e.userList[e.currentEditNotIncludedUserIndex].data.player.name},on:{"update:show":function(t){e.dialogSetNotIncludedVisible=t},"change-not-included":e.changeNotIncluded}}):e._e(),n("div",{staticClass:"flex between",staticStyle:{"margin-bottom":"8px"}},[n("div",[n("el-checkbox",{attrs:{label:"all",indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全部")]),n("el-checkbox-group",{on:{change:e.handleCheckedRarityChange},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.rarityList,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),n("div",[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.checkList=[]}}},[e._v("清空稀有度")]),n("el-button",{attrs:{size:"mini"},on:{click:e.clearFilter}},[e._v("重置所有过滤项")])],1)]),e.shards.length>0?n("div",{staticStyle:{height:"calc(100vh - 172px)"}},[n("el-table",{ref:"shardsTable",staticStyle:{width:"100%"},attrs:{data:e.computedShardsList,"highlight-current-row":"",stripe:"",border:"",height:"100%"}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"110"}}),n("el-table-column",{attrs:{label:"稀有度",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"rarity",class:""+t.row.rarity},[e._v(e._s(e.transformRarityName(t.row.rarity)))])]}}],null,!1,2866931175)}),e._l(e.userList,(function(t,r){return n("el-table-column",{key:"userColumn"+r,attrs:{align:"center",label:""+t.data.player.name}},[n("template",{slot:"header"},[n("div",{staticClass:"flex center"},[n("div",[e._v(e._s(t.data.player.name))]),e._v("  "),n("div",{staticClass:"btnSetNotIncluded",on:{click:function(t){return e.setNotIncluded(r)}}},[e._v("设置未收录")])])]),n("el-table-column",{key:"shard"+r,attrs:{label:"持有碎片"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(t.row.shards[r]))])]}}],null,!0)}),n("el-table-column",{key:"included"+r,attrs:{filters:[{text:"已收录",value:1},{text:"未收录",value:0}],"filter-method":function(t,n){return e.filterIncluded(t,n,r)},label:"收录状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{class:{"not-included":0===t.row.included[r]}},[e._v(" "+e._s(1===t.row.included[r]?"":"未收录")+" ")])]}}],null,!0)}),n("el-table-column",{key:"have"+r,attrs:{filters:[{text:"仓库中有",value:1},{text:"仓库中无",value:0}],"filter-method":function(t,n){return e.filterHave(t,n,r)},label:"仓检"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{class:{"have-not":0===t.row.have[r]}},[e._v(" "+e._s(1===t.row.have[r]?"":"仓库中无")+" ")])]}}],null,!0)})],2)})),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"110"}}),n("el-table-column",{attrs:{label:"共有碎片",prop:"holdings",width:"80"}}),n("el-table-column",{attrs:{label:"仍缺",prop:"required",width:"80"}})],2)],1):e._e()],1)},i=[],a=n("5530"),o=(n("4de4"),n("d81d"),n("4e82"),n("b0c0"),n("159b"),n("a630"),n("3ca3"),n("d3b7"),n("6062"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialogSetNotIncluded"},[n("el-dialog",{attrs:{title:"设置未收录 - "+e.userName,visible:e.dialogVisible,width:"650px","before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-transfer",{staticStyle:{margin:"0 auto"},attrs:{data:e.allData,titles:["已收录","未收录"],filterable:""},model:{value:e.checkedData,callback:function(t){e.checkedData=t},expression:"checkedData"}}),n("div",{staticClass:"flex center"},[n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)}),c=[],s=n("2f62"),l={name:"dialogSetNotIncluded",mixins:[],components:{},filters:{},props:{notIncluded:{type:Array,default:function(){return[]}},userName:{type:String,default:""},show:{type:Boolean,default:!1}},data:function(){return{allData:[],checkedData:[],dialogVisible:!1}},computed:Object(a["a"])({},Object(s["c"])(["allHeroList"])),watch:{},created:function(){this.dialogVisible=!0,this.checkedData=JSON.parse(JSON.stringify(this.notIncluded)).map((function(e){return"".concat(e)})),this.allData=this.allHeroList.map((function(e){return{key:e.id,label:e.name}}))},mounted:function(){},updated:function(){},beforeDestroy:function(){},methods:{beforeClose:function(){this.$emit("update:show",!1)},save:function(){this.$emit("change-not-included",this.checkedData.map((function(e){return parseInt(e)}))),this.dialogVisible=!1,this.beforeClose()}}},u=l,d=(n("38d1"),n("d090"),n("2877")),f=Object(d["a"])(u,o,c,!1,null,"389683e6",null),h=f.exports,v=n("0712"),b={name:"heroList",mixins:[v["a"]],components:{dialogSetNotIncluded:h},filters:{},props:{},data:function(){return{tableHeight:0,rarityList:[{name:"SP",value:"SP"},{name:"SSR",value:"SSR"},{name:"SR",value:"SR"},{name:"R",value:"R"},{name:"N",value:"N"},{name:"素材",value:"MATERIAL"},{name:"联动",value:"INTERACTIVE"}],isIndeterminate:!0,checkAll:!1,checkList:["SP","SSR"],shards:[],heroIdList:[],currentEditNotIncludedUserIndex:-1,dialogSetNotIncludedVisible:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(s["c"])(["allHeroList","notIncludedList"])),Object(s["b"])("user",["userList"])),{},{computedShardsList:function(){var e=this,t=[];return t=-1!==this.checkList.indexOf("INTERACTIVE")?this.shards.filter((function(t){return-1!==e.checkList.indexOf(t.rarity)||t.interactive})):this.shards.filter((function(t){return-1!==e.checkList.indexOf(t.rarity)&&!("undefined"!==typeof t.interactive)})),t}}),watch:{},created:function(){var e=this;this.getNotIncluded().then((function(){e.initData()}))},mounted:function(){},updated:function(){},methods:{initData:function(){var e=this;this.shards=this.allHeroList.sort((function(e,t){return t.id-e.id})).map((function(t){var n={name:t.name,rarity:t.rarity,id:t.id,shards:[],included:[],have:[],required:0,holdings:0};!0===t.interactive&&(n.interactive=!0),e.userList.forEach((function(r,i){r.data.hero_book_shards.forEach((function(e){n.id==e.hero_id&&(n.bookMaxShards=e.book_max_shards,n.shards[i]=e.shards)})),e.heroIdList[i]=Array.from(new Set(r.data.heroes.map((function(e){return e.hero_id})))),n.included[i]=-1!==e.notIncludedList[i].indexOf(parseInt(t.id))?0:1,n.have[i]=-1!==e.heroIdList[i].indexOf(parseInt(t.id))?1:0})),n.holdings=n.shards.reduce((function(e,t){return e+=t,e}),0);var r=n.included.reduce((function(e,t){return 0===t?++e:e}),0),i=n.bookMaxShards*r-n.holdings;return n.required=i>0?i:"-",n}))},transformRarityName:function(e){var t="";return this.rarityList.forEach((function(n){n.value==e&&(t=n.name)})),t},handleCheckAllChange:function(e){this.checkList=e?this.rarityList.map((function(e){return e.value})):[],this.isIndeterminate=!1},handleCheckedRarityChange:function(e){this.checkAll=e.length===this.rarityList.length,this.isIndeterminate=e.length>0&&e.length<this.rarityList.length},clearFilter:function(){this.$refs.shardsTable.clearFilter()},filterIncluded:function(e,t,n){return e===t.included[n]},filterHave:function(e,t,n){return e===t.have[n]},setNotIncluded:function(e){this.currentEditNotIncludedUserIndex=e,this.dialogSetNotIncludedVisible=!0},changeNotIncluded:function(e){var t=this;this.$store.commit("updateNotIncluded",{index:this.currentEditNotIncludedUserIndex,value:e}),this.updateUserNotIncluded(this.currentEditNotIncludedUserIndex,{id:this.userList[this.currentEditNotIncludedUserIndex].data.player.id,value:e}).then((function(){t.$message.success("设置未收录成功"),t.initData()}))}}},p=b,m=(n("5842"),Object(d["a"])(p,r,i,!1,null,"3d90659e",null));t["default"]=m.exports},bb2f:function(e,t,n){var r=n("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d090:function(e,t,n){"use strict";n("a81e")},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),a=n("56ef"),o=n("fc6a"),c=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),i=c.f,l=a(r),u={},d=0;while(l.length>d)n=i(r,t=l[d++]),void 0!==n&&s(u,t,n);return u}})},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),a=n("fc6a"),o=n("06cf").f,c=n("83ab"),s=i((function(){o(1)})),l=!c||s;r({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},f183:function(e,t,n){var r=n("23e7"),i=n("d012"),a=n("861d"),o=n("5135"),c=n("9bf2").f,s=n("241c"),l=n("057f"),u=n("90e3"),d=n("bb2f"),f=!1,h=u("meta"),v=0,b=Object.isExtensible||function(){return!0},p=function(e){c(e,h,{value:{objectID:"O"+v++,weakData:{}}})},m=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,h)){if(!b(e))return"F";if(!t)return"E";p(e)}return e[h].objectID},g=function(e,t){if(!o(e,h)){if(!b(e))return!0;if(!t)return!1;p(e)}return e[h].weakData},y=function(e){return d&&f&&b(e)&&!o(e,h)&&p(e),e},x=function(){k.enable=function(){},f=!0;var e=s.f,t=[].splice,n={};n[h]=1,e(n).length&&(s.f=function(n){for(var r=e(n),i=0,a=r.length;i<a;i++)if(r[i]===h){t.call(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},k=e.exports={enable:x,fastKey:m,getWeakData:g,onFreeze:y};i[h]=!0}}]);
//# sourceMappingURL=chunk-c67d5512.2689de87.js.map