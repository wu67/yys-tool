{"version":3,"sources":["webpack:///./src/pages/equipList.vue?63cf","webpack:///./src/pages/equipList.vue?024f","webpack:///src/pages/equipList.vue","webpack:///./src/pages/equipList.vue?316a","webpack:///./src/pages/equipList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","changeUser","model","value","callback","$$v","currentUser","expression","_l","user","userIndex","key","data","player","name","staticStyle","_v","isIndeterminateAllAttr","handleCheckAllAttrChange","checkAllAttr","handleCheckedAttrChange","checkAttrList","item","_s","ref","computedList","onTableSortChange","scopedSlots","_u","fn","scope","transNumberToChinese","row","pos","equipMap","transAttrToName","mainAttr","type","single_attrs","length","_e","attr","toFixed","_f","Date","born","currentPage","pageSize","list","$event","staticRenderFns","mixins","components","props","computed","watch","created","allAttrList","map","initData","updated","beforeDestroy","methods","$nextTick","bool","hero_equips","result","$refs","equipTable","clearSort","order","sortMethod","sort","getAttrSum","sum","equip","attrName","allAttrMap","multiply","parseFloat","mathjs","component"],"mappings":"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","file":"js/chunk-2e4060b2.26bdd437.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipList.vue?vue&type=style&index=0&id=3b7d3b26&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-equip-list\"},[_c('el-tabs',{attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.changeUser},model:{value:(_vm.currentUser),callback:function ($$v) {_vm.currentUser=$$v},expression:\"currentUser\"}},_vm._l((_vm.user.userList),function(user,userIndex){return _c('el-tab-pane',{key:userIndex,attrs:{\"label\":user.data.player.name}})}),1),_c('div',{staticClass:\"flex\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('div',{staticClass:\"flex\"},[_c('div',[_vm._v(\"主属性：\")]),_c('el-checkbox',{attrs:{\"label\":\"all\",\"indeterminate\":_vm.isIndeterminateAllAttr},on:{\"change\":_vm.handleCheckAllAttrChange},model:{value:(_vm.checkAllAttr),callback:function ($$v) {_vm.checkAllAttr=$$v},expression:\"checkAllAttr\"}},[_vm._v(\"全部\")]),_vm._v(\"  \"),_c('el-checkbox-group',{on:{\"change\":_vm.handleCheckedAttrChange},model:{value:(_vm.checkAttrList),callback:function ($$v) {_vm.checkAttrList=$$v},expression:\"checkAttrList\"}},_vm._l((_vm.allAttrList),function(item){return _c('el-checkbox',{key:item.key,attrs:{\"label\":item.key}},[_vm._v(_vm._s(item.name))])}),1)],1)]),_c('div',{},[_c('el-table',{ref:\"equipTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.computedList,\"highlight-current-row\":\"\",\"stripe\":\"\",\"border\":\"\"},on:{\"sort-change\":_vm.onTableSortChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"fixed\":\"left\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"pos\",\"label\":\"位置\",\"width\":\"50\",\"fixed\":\"left\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.transNumberToChinese(scope.row.pos + 1))+\" \")]}}])}),_c('el-table-column',{attrs:{\"width\":\"50\",\"prop\":\"level\",\"label\":\"等级\",\"fixed\":\"left\"}}),_c('el-table-column',{attrs:{\"label\":\"御魂类型\",\"width\":\"80\",\"fixed\":\"left\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.equipMap[(\"\" + (scope.row.suit_id))])+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"主属性\",\"width\":\"130\",\"fixed\":\"left\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"flex attr-name\"},[_c('div',{staticClass:\"main\"},[_vm._v(_vm._s(_vm.transAttrToName(scope.row.mainAttr.type)))]),(scope.row.single_attrs.length > 0)?_c('div',{staticClass:\"fixed-name\"},[_vm._v(\" | \"+_vm._s(_vm.transAttrToName(scope.row.single_attrs[0].type)))]):_vm._e()])]}}])}),_vm._l((_vm.effectiveAttrList),function(attr){return _c('el-table-column',{key:attr.key,attrs:{\"label\":attr.name,\"min-width\":\"125\",\"align\":\"left\",\"sortable\":\"custom\",\"prop\":attr.key},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"flex\"},[(scope.row.mainAttr.type === attr.key)?_c('div',{staticClass:\"attr-value main\"},[_vm._v(\" \"+_vm._s(scope.row.mainAttr.value)+\" \")]):_vm._e(),(scope.row[(\"\" + (attr.key))])?_c('div',{staticClass:\"attr-value random\"},[_vm._v(\" \"+_vm._s(scope.row.mainAttr.type === attr.key ? ' +' : '')+_vm._s(scope.row[(\"\" + (attr.key))].toFixed(2))+\" \")]):_vm._e(),(scope.row.single_attrs.length > 0 && (scope.row.single_attrs[0].type === attr.key))?_c('div',{staticClass:\"attr-value fixed-value\"},[_vm._v(\"  +\"+_vm._s(scope.row.single_attrs[0].value)+\" \")]):_vm._e()])]}}],null,true)})}),_c('el-table-column',{attrs:{\"label\":\"获得时间\",\"width\":\"150\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"born-time\"},[_vm._v(_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.born * 1000),'yyyy-MM-dd hh:mm')))])]}}])})],2)],1),_c('div',{staticClass:\"flex center pagination-wrap\"},[_c('el-pagination',{attrs:{\"layout\":\"prev, pager, next, jumper, sizes, total\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"page-sizes\":[5, 10, 15,  20],\"total\":_vm.list.length},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-equip-list\">\n    <el-tabs v-model=\"currentUser\"\n             type=\"card\"\n             @tab-click=\"changeUser\">\n      <el-tab-pane :label=\"user.data.player.name\"\n                   v-for=\"(user, userIndex) in user.userList\"\n                   :key=\"userIndex\"></el-tab-pane>\n    </el-tabs>\n    <div class=\"flex\" style=\"margin-bottom: 10px;\">\n      <div class=\"flex\">\n        <div>主属性：</div>\n        <el-checkbox label=\"all\"\n                     v-model=\"checkAllAttr\"\n                     @change=\"handleCheckAllAttrChange\"\n                     :indeterminate=\"isIndeterminateAllAttr\">全部</el-checkbox>&nbsp;\n        <el-checkbox-group @change=\"handleCheckedAttrChange\" v-model=\"checkAttrList\">\n          <el-checkbox\n            v-for=\"item in allAttrList\"\n            :label=\"item.key\"\n            :key=\"item.key\">{{ item.name }}</el-checkbox>\n        </el-checkbox-group>\n      </div>\n    </div>\n    <!--      v-if=\"list.length > 0\"-->\n    <div\n      style=\"\">\n<!--        height=\"100%\"-->\n      <el-table\n        :data=\"computedList\"\n        @sort-change=\"onTableSortChange\"\n        highlight-current-row\n        stripe\n        border\n        ref=\"equipTable\"\n        style=\"width: 100%\">\n        <el-table-column\n          type=\"index\"\n          fixed=\"left\"\n          width=\"50\">\n        </el-table-column>\n        <el-table-column prop=\"pos\" label=\"位置\" width=\"50\" fixed=\"left\">\n          <template slot-scope=\"scope\">\n            {{ transNumberToChinese(scope.row.pos + 1) }}\n          </template>\n        </el-table-column>\n        <el-table-column width=\"50\" prop=\"level\" label=\"等级\" fixed=\"left\"></el-table-column>\n\n        <el-table-column label=\"御魂类型\" width=\"80\" fixed=\"left\">\n          <template slot-scope=\"scope\">\n            {{ equipMap[`${scope.row.suit_id}`] }}\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"主属性\" width=\"130\" fixed=\"left\">\n          <template slot-scope=\"scope\">\n            <div class=\"flex attr-name\">\n              <div class=\"main\">{{ transAttrToName(scope.row.mainAttr.type) }}</div>\n              <div v-if=\"scope.row.single_attrs.length > 0\"\n                   class=\"fixed-name\">&nbsp;|&nbsp;{{ transAttrToName(scope.row.single_attrs[0].type) }}</div>\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column :label=\"attr.name\"\n                         min-width=\"125\"\n                         align=\"left\"\n                         sortable=\"custom\"\n                         v-for=\"attr in effectiveAttrList\"\n                         :prop=\"attr.key\"\n                         :key=\"attr.key\">\n          <template slot-scope=\"scope\">\n            <div class=\"flex\">\n              <!-- 主属性 -->\n              <div\n                class=\"attr-value main\"\n                v-if=\"scope.row.mainAttr.type === attr.key\"\n              >\n                {{ scope.row.mainAttr.value }}\n              </div>\n              <!-- 主属性 end -->\n              <!-- 副属性 -->\n              <div\n                class=\"attr-value random\"\n                v-if=\"scope.row[`${attr.key}`]\"\n              >\n                {{ scope.row.mainAttr.type === attr.key ? '&nbsp;+' : '' }}{{ scope.row[`${attr.key}`].toFixed(2) }}\n              </div>\n              <!-- 副属性 end-->\n              <!-- 固定属性 -->\n              <div class=\"attr-value fixed-value\"\n                   v-if=\"scope.row.single_attrs.length > 0 && (scope.row.single_attrs[0].type === attr.key)\">\n                &nbsp;+{{ scope.row.single_attrs[0].value }}\n              </div>\n              <!-- 固定属性 end -->\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"获得时间\" width=\"150\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <div class=\"born-time\">{{ new Date(scope.row.born * 1000) | formatTime('yyyy-MM-dd hh:mm') }}</div>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div class=\"flex center pagination-wrap\">\n      <el-pagination\n        layout=\"prev, pager, next, jumper, sizes, total\"\n        :current-page.sync=\"currentPage\"\n        :page-size.sync=\"pageSize\"\n        :page-sizes=\"[5, 10, 15,  20]\"\n        :total=\"list.length\">\n    </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  mapState,\n  mapGetters\n} from 'vuex'\nimport mathjs from '@/utils/mathjs'\nimport baseMixin from '@/mixin'\n\nexport default {\n  name: 'equipList',\n  mixins: [\n    baseMixin\n  ],\n  components: {},\n  props: {},\n  data () {\n    return {\n      currentUser: 0,\n      checkAllAttr: true,\n      isIndeterminateAllAttr: false,\n      checkAttrList: [],\n      list: [],\n      currentPage: 1,\n      pageSize: 10\n    }\n  },\n  computed: {\n    ...mapState([\n      'user',\n      'equipList',\n      'notPercentAttr'\n    ]),\n    ...mapGetters([\n      'equipMap',\n      'allAttrMap',\n      'allAttrList',\n      'effectiveAttrList'\n    ]),\n    // 将数据分页。动辄上千行数据，全部渲染的话，会比较耗时\n    computedList () {\n      if (this.list.length < this.pageSize) {\n        return this.list\n      } else {\n        return this.list\n          .slice(\n            (this.currentPage - 1) * this.pageSize,\n            (this.list.length > this.currentPage * this.pageSize\n              ? this.currentPage * this.pageSize\n              : this.list.length)\n          )\n      }\n    }\n  },\n  watch: {},\n  created () {\n    this.checkAttrList = this.allAttrList.map(item => item.key)\n    this.initData()\n  },\n  updated () {},\n  beforeDestroy () {},\n  methods: {\n    changeUser () {\n      this.$nextTick(() => {\n        this.initData()\n      })\n    },\n    handleCheckAllAttrChange (bool) {\n      this.checkAttrList = bool ? this.allAttrList.map(item => item.key) : []\n      this.isIndeterminateAllAttr = false\n      this.currentPage = 1\n      this.initData()\n    },\n    handleCheckedAttrChange (value) {\n      this.checkAllAttr = this.allAttrList.length === value.length\n      this.isIndeterminateAllAttr = value.length > 0 && value.length < this.allAttrList.length\n      this.currentPage = 1\n      this.initData()\n    },\n    initData () {\n      const data = this.user.userList[parseInt(this.currentUser)].data\n\n      this.list = data.hero_equips\n        .map(item => {\n          const result = {\n            id: item.id,\n            single_attrs: [],\n            born: item.born,\n            level: item.level,\n            pos: item.pos,\n            quality: item.quality,\n            suit_id: item.suit_id,\n            mainAttr: {\n              type: item.base_attr.type\n            }\n          }\n\n          // 处理副属性\n          for (const rAttr of item.random_attrs) {\n            if (this.notPercentAttr.indexOf(rAttr.type) === -1) {\n              result[`${rAttr.type}`] = this.multiply(rAttr.value)\n            } else {\n              result[`${rAttr.type}`] = rAttr.value\n            }\n          }\n\n          // 处理主属性\n          if (this.notPercentAttr.indexOf(item.base_attr.type) === -1) {\n            result.mainAttr.value = this.multiply(item.base_attr.value)\n          } else {\n            result.mainAttr.value = item.base_attr.value\n          }\n\n          // 处理首领魂的固定属性 全是加成百分比属性. 当前版本最多只会有1条固定属性\n          if (item.single_attrs.length > 0) {\n            result.single_attrs.push({\n              type: item.single_attrs[0].type,\n              value: this.multiply(item.single_attrs[0].value)\n            })\n          }\n          return result\n        })\n        .filter(item => (this.checkAttrList.indexOf(item.mainAttr.type) !== -1))\n        .sort((a, b) => b.born - a.born)\n\n      if (this.$refs.equipTable && typeof this.$refs.equipTable.clearSort === 'function') {\n        this.$refs.equipTable.clearSort()\n      }\n    },\n    onTableSortChange ({ prop, order }) {\n      // 默认按 获得时间 排序\n      let sortMethod = (a, b) => (b.born - a.born)\n\n      if (order === 'descending') {\n        // 从高到低\n        sortMethod = (a, b) => this.getAttrSum(b, prop) - this.getAttrSum(a, prop)\n\n      } else if (order === 'ascending') {\n        // 从低到高\n        sortMethod = (a, b) => this.getAttrSum(a, prop) - this.getAttrSum(b, prop)\n      } else {\n        // 此时order为null\n      }\n      this.list = this.list.sort(sortMethod).map(item => item)\n    },\n    // 计算单个御魂中某个属性的总值\n    getAttrSum (equip, attrName) {\n      let sum = 0\n      sum += equip[`${attrName}`] || 0\n\n      // 主属性\n      if (equip.mainAttr.type === attrName) {\n        sum = sum + equip.mainAttr.value\n      }\n      // （首领魂）固定属性\n      if (equip.single_attrs.length > 0 && equip.single_attrs[0].type === attrName) {\n        sum = sum + equip.single_attrs[0].value\n      }\n      return sum\n    },\n    transAttrToName (attr) {\n      return this.allAttrMap[attr]\n    },\n    multiply (value, ratio = 100) {\n      return parseFloat(mathjs.chain(value).multiply(ratio).done().toPrecision(12))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\"\n       scoped>\n@import \"~@/assets/css/flex-custom.scss\";\n\n.page-equip-list {\n  padding: 10px 40px 20px;\n  height: 100%;\n  //position: relative;\n  width: 1600px;\n  margin: 0 auto;\n}\n\n$mainAttrColor: #F56C6C;\n$fixedAttrColor: #E6A23C;\n\n.attr-name {\n  font-size: 12px;\n\n  .main {\n    color: $mainAttrColor;\n    font-weight: 600;\n  }\n\n  .fixed-name {\n    color: $fixedAttrColor;\n  }\n}\n\n.attr-value {\n  //font-size: 11px;\n  color: #222;\n\n  &.main {\n    color: $mainAttrColor;\n    font-weight: 600;\n  }\n\n  &.random {\n    color: #777;\n  }\n\n  &.fixed-value {\n    color: $fixedAttrColor;\n  }\n}\n\n.born-time {\n  font-size: 12px;\n  color: #777;\n}\n\n.pagination-wrap {\n  padding: 10px 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./equipList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./equipList.vue?vue&type=template&id=3b7d3b26&scoped=true&\"\nimport script from \"./equipList.vue?vue&type=script&lang=js&\"\nexport * from \"./equipList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./equipList.vue?vue&type=style&index=0&id=3b7d3b26&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b7d3b26\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}